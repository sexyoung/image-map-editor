{"version":3,"sources":["components/Rectangle/style.module.css","components/Rectangle/index.tsx","components/ImagePreviewer/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/ImagePreviewer/style.module.css","App.module.css"],"names":["module","exports","Rectangle","onDelete","disabledTrash","props","className","style","rectangle","trash","onClick","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","dot","toBase64","file","a","Promise","resolve","reject","reader","FileReader","readAsDataURL","onerror","error","onload","result","getOffsetPosition","currentTarget","getBoundingClientRect","offsetX","x","offsetY","y","ImagePreviewer","rectangleList","appendRectangleList","deleteRectangle","useState","preview","setPreview","scope","setScope","handleUpload","e","target","files","Compressor","maxWidth","success","getRectangleAttr","x2","y2","left","top","width","height","handleMouseUp","useCallback","cx","src","alt","map","index","bind","Map","onMouseUp","onMouseDown","clientX","clientY","onMouseMove","type","onChange","accept","App","setRectangleList","ImageUploadArea","list","filter","_","i","ConsoleArea","length","JSON","stringify","r","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.21c86614.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"rectangle\":\"style_rectangle__NMO1q\",\"trash\":\"style_trash__DOcNe\",\"disabled\":\"style_disabled__38ylL\",\"dot\":\"style_dot__1XgEc\"};","import * as Type from 'type';\nimport style from './style.module.css';\n\ntype Props = Type.Rectangle & {\n  disabledTrash?: boolean;\n  onDelete?: () => void;\n}\n\nexport const Rectangle: React.FC<Props> = ({onDelete, disabledTrash, ...props}) => {\n  return (\n    <div className={style.rectangle} style={props}>\n      {!disabledTrash &&\n        <div className={style.trash} onClick={onDelete}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#bebec3\" strokeWidth=\"2\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n          </svg>\n        </div>\n      }\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n      <div className={style.dot} />\n    </div>\n  )\n}\n","import cx from 'classnames';\nimport Compressor from 'compressorjs';\nimport { FC, useState, MouseEventHandler, useCallback } from 'react';\n\nimport * as Type from 'type';\nimport * as Comp from \"components\";\n\nimport style from './style.module.css';\n\nconst toBase64 = async (file: File | Blob) => new Promise((resolve, reject) => {\n  const reader = new FileReader();\n  reader.readAsDataURL(file);\n  reader.onerror = error => reject(error);\n  reader.onload = () => resolve(reader.result);\n});\n\ninterface Props {\n  rectangleList: Type.Rectangle[];\n  deleteRectangle: (index: number) => void;\n  appendRectangleList: {(rectangleList: Type.Rectangle): void};\n}\n\nconst getOffsetPosition = (currentTarget: HTMLDivElement) => {\n  const {x: offsetX, y: offsetY} = currentTarget.getBoundingClientRect();\n  return {offsetX, offsetY}\n}\n\nexport const ImagePreviewer: FC<Props> = ({ rectangleList, appendRectangleList, deleteRectangle }) => {\n  const [preview, setPreview] = useState<string>();\n  const [scope, setScope] = useState<Type.Scope | null>();\n\n  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files![0];\n    new Compressor(file, {maxWidth: 355, success: async (result) => {\n      setPreview(await toBase64(result) as string);\n    }});\n  };\n\n  const handleMouseDown: MouseEventHandler<HTMLDivElement> = (e) => {\n    if(scope) return;\n    const {offsetX, offsetY} = getOffsetPosition(e.currentTarget);\n    setScope({\n      x: e.clientX - offsetX,\n      y: e.clientY - offsetY,\n      x2: e.clientX - offsetX,\n      y2: e.clientY - offsetY,\n    })\n  }\n\n  const handleMouseMove: MouseEventHandler<HTMLDivElement> = (e) => {\n    if(!scope) return;\n    let {x, y} = scope;\n    const {offsetX, offsetY} = getOffsetPosition(e.currentTarget);\n    let x2 = e.clientX - offsetX;\n    let y2 = e.clientY - offsetY;\n    setScope({ x, y, x2, y2 });\n  }\n\n  const getRectangleAttr = ((scope: Type.Scope) => {\n    let {x, y, x2, y2} = scope;\n    if(x2 < x) [x, x2] = [x2, x];\n    if(y2 < y) [y, y2] = [y2, y];\n    const width = x2 - x;\n    const height = y2 - y;\n    return { left: x, top: y, width, height }\n  });\n\n  const handleMouseUp = useCallback(() => {\n    setScope(null);\n    if(!scope) return {};\n    const { left, top, width, height} = getRectangleAttr(scope);\n    appendRectangleList({left, top, width, height});\n  }, [appendRectangleList, scope]);\n\n  if(!preview) return (\n    <label className={style.ImagePreviewer}>\n      <input type=\"file\" onChange={handleUpload} accept=\"image/*\" />\n      <svg width=\"24\" xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#bbbdbf\" strokeWidth=\"2\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n      </svg>\n      Upload image\n    </label>\n  );\n\n  return (\n    <div className={cx(style.ImagePreviewer, style.preview)}>\n      <img src={preview} alt=\"the preview\" className={style.preview} />\n      {rectangleList.map((rectangle, index) =>\n        <Comp.Rectangle key={index} onDelete={deleteRectangle.bind(null, index)} disabledTrash={scope} {...rectangle} />\n      )}\n      <div className={style.Map}\n        onMouseUp={handleMouseUp}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}>\n        {scope && (\n          <Comp.Rectangle {...getRectangleAttr(scope)} disabledTrash={true} />\n        )}\n      </div>\n    </div>\n  );\n};\n","import {useState} from 'react';\n\nimport * as Type from 'type';\nimport * as Comp from \"components\";\n\nimport style from './App.module.css';\n\nfunction App() {\n  const [rectangleList, setRectangleList] = useState<Type.Rectangle[]>([]);\n  const appendRectangleList = (rectangle: Type.Rectangle) => {\n    setRectangleList(list => [...list, rectangle]);\n  };\n\n  const deleteRectangle = (index: number) => {\n    setRectangleList(list => list.filter((_, i) => i !== index));\n  }\n\n  return (\n    <div className={style.App}>\n      <div className={style.ImageUploadArea}>\n        <Comp.ImagePreviewer {...{rectangleList, appendRectangleList, deleteRectangle}} />\n      </div>\n      <pre className={style.ConsoleArea}>\n        {!!rectangleList.length && JSON.stringify(rectangleList.map(r => ({x: r.left, y: r.top, width: r.width, height: r.height})), null, 4)}\n      </pre>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImagePreviewer\":\"style_ImagePreviewer__3JiQ3\",\"preview\":\"style_preview__1-uHM\",\"Map\":\"style_Map__2SuDB\",\"rectangle\":\"style_rectangle__1gMN-\",\"dot\":\"style_dot__1izSC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"ImageUploadArea\":\"App_ImageUploadArea__1ubkd\",\"ConsoleArea\":\"App_ConsoleArea__3645x\"};"],"sourceRoot":""}